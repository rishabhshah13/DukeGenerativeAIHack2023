{"ast":null,"code":"function valueType(value) {\n  if (value === undefined) return 'undefined';\n  if (Array.isArray(value)) return 'array';\n  if (typeof value === 'object') return 'object';\n  return 'scalar';\n}\nfunction setLastValue(context, step, currentValue, entryValue) {\n  switch (valueType(currentValue)) {\n    case 'undefined':\n      if (step.append) {\n        context[step.key] = [entryValue];\n      } else {\n        context[step.key] = entryValue;\n      }\n      break;\n    case 'array':\n      context[step.key].push(entryValue);\n      break;\n    case 'object':\n      return setLastValue(currentValue, {\n        type: 'object',\n        key: '',\n        last: true\n      }, currentValue[''], entryValue);\n    case 'scalar':\n      context[step.key] = [context[step.key], entryValue];\n      break;\n  }\n  return context;\n}\nfunction setValue(context, step, currentValue, entryValue) {\n  if (step.last) return setLastValue(context, step, currentValue, entryValue);\n  var obj;\n  switch (valueType(currentValue)) {\n    case 'undefined':\n      if (step.nextType === 'array') {\n        context[step.key] = [];\n      } else {\n        context[step.key] = Object.create(null);\n      }\n      return context[step.key];\n    case 'object':\n      return context[step.key];\n    case 'array':\n      if (step.nextType === 'array') {\n        return currentValue;\n      }\n      obj = Object.create(null);\n      context[step.key] = obj;\n      currentValue.forEach(function (item, i) {\n        if (item !== undefined) obj['' + i] = item;\n      });\n      return obj;\n    case 'scalar':\n      obj = Object.create(null);\n      obj[''] = currentValue;\n      context[step.key] = obj;\n      return obj;\n  }\n}\nmodule.exports = setValue;","map":{"version":3,"names":["valueType","value","undefined","Array","isArray","setLastValue","context","step","currentValue","entryValue","append","key","push","type","last","setValue","obj","nextType","Object","create","forEach","item","i","module","exports"],"sources":["/Users/rishabhshah/Desktop/GenAIGit/DukeGenAI2023/adhd-fe/node_modules/append-field/lib/set-value.js"],"sourcesContent":["function valueType (value) {\n  if (value === undefined) return 'undefined'\n  if (Array.isArray(value)) return 'array'\n  if (typeof value === 'object') return 'object'\n  return 'scalar'\n}\n\nfunction setLastValue (context, step, currentValue, entryValue) {\n  switch (valueType(currentValue)) {\n    case 'undefined':\n      if (step.append) {\n        context[step.key] = [entryValue]\n      } else {\n        context[step.key] = entryValue\n      }\n      break\n    case 'array':\n      context[step.key].push(entryValue)\n      break\n    case 'object':\n      return setLastValue(currentValue, { type: 'object', key: '', last: true }, currentValue[''], entryValue)\n    case 'scalar':\n      context[step.key] = [context[step.key], entryValue]\n      break\n  }\n\n  return context\n}\n\nfunction setValue (context, step, currentValue, entryValue) {\n  if (step.last) return setLastValue(context, step, currentValue, entryValue)\n\n  var obj\n  switch (valueType(currentValue)) {\n    case 'undefined':\n      if (step.nextType === 'array') {\n        context[step.key] = []\n      } else {\n        context[step.key] = Object.create(null)\n      }\n      return context[step.key]\n    case 'object':\n      return context[step.key]\n    case 'array':\n      if (step.nextType === 'array') {\n        return currentValue\n      }\n\n      obj = Object.create(null)\n      context[step.key] = obj\n      currentValue.forEach(function (item, i) {\n        if (item !== undefined) obj['' + i] = item\n      })\n\n      return obj\n    case 'scalar':\n      obj = Object.create(null)\n      obj[''] = currentValue\n      context[step.key] = obj\n      return obj\n  }\n}\n\nmodule.exports = setValue\n"],"mappings":"AAAA,SAASA,SAASA,CAAEC,KAAK,EAAE;EACzB,IAAIA,KAAK,KAAKC,SAAS,EAAE,OAAO,WAAW;EAC3C,IAAIC,KAAK,CAACC,OAAO,CAACH,KAAK,CAAC,EAAE,OAAO,OAAO;EACxC,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE,OAAO,QAAQ;EAC9C,OAAO,QAAQ;AACjB;AAEA,SAASI,YAAYA,CAAEC,OAAO,EAAEC,IAAI,EAAEC,YAAY,EAAEC,UAAU,EAAE;EAC9D,QAAQT,SAAS,CAACQ,YAAY,CAAC;IAC7B,KAAK,WAAW;MACd,IAAID,IAAI,CAACG,MAAM,EAAE;QACfJ,OAAO,CAACC,IAAI,CAACI,GAAG,CAAC,GAAG,CAACF,UAAU,CAAC;MAClC,CAAC,MAAM;QACLH,OAAO,CAACC,IAAI,CAACI,GAAG,CAAC,GAAGF,UAAU;MAChC;MACA;IACF,KAAK,OAAO;MACVH,OAAO,CAACC,IAAI,CAACI,GAAG,CAAC,CAACC,IAAI,CAACH,UAAU,CAAC;MAClC;IACF,KAAK,QAAQ;MACX,OAAOJ,YAAY,CAACG,YAAY,EAAE;QAAEK,IAAI,EAAE,QAAQ;QAAEF,GAAG,EAAE,EAAE;QAAEG,IAAI,EAAE;MAAK,CAAC,EAAEN,YAAY,CAAC,EAAE,CAAC,EAAEC,UAAU,CAAC;IAC1G,KAAK,QAAQ;MACXH,OAAO,CAACC,IAAI,CAACI,GAAG,CAAC,GAAG,CAACL,OAAO,CAACC,IAAI,CAACI,GAAG,CAAC,EAAEF,UAAU,CAAC;MACnD;EACJ;EAEA,OAAOH,OAAO;AAChB;AAEA,SAASS,QAAQA,CAAET,OAAO,EAAEC,IAAI,EAAEC,YAAY,EAAEC,UAAU,EAAE;EAC1D,IAAIF,IAAI,CAACO,IAAI,EAAE,OAAOT,YAAY,CAACC,OAAO,EAAEC,IAAI,EAAEC,YAAY,EAAEC,UAAU,CAAC;EAE3E,IAAIO,GAAG;EACP,QAAQhB,SAAS,CAACQ,YAAY,CAAC;IAC7B,KAAK,WAAW;MACd,IAAID,IAAI,CAACU,QAAQ,KAAK,OAAO,EAAE;QAC7BX,OAAO,CAACC,IAAI,CAACI,GAAG,CAAC,GAAG,EAAE;MACxB,CAAC,MAAM;QACLL,OAAO,CAACC,IAAI,CAACI,GAAG,CAAC,GAAGO,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC;MACzC;MACA,OAAOb,OAAO,CAACC,IAAI,CAACI,GAAG,CAAC;IAC1B,KAAK,QAAQ;MACX,OAAOL,OAAO,CAACC,IAAI,CAACI,GAAG,CAAC;IAC1B,KAAK,OAAO;MACV,IAAIJ,IAAI,CAACU,QAAQ,KAAK,OAAO,EAAE;QAC7B,OAAOT,YAAY;MACrB;MAEAQ,GAAG,GAAGE,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC;MACzBb,OAAO,CAACC,IAAI,CAACI,GAAG,CAAC,GAAGK,GAAG;MACvBR,YAAY,CAACY,OAAO,CAAC,UAAUC,IAAI,EAAEC,CAAC,EAAE;QACtC,IAAID,IAAI,KAAKnB,SAAS,EAAEc,GAAG,CAAC,EAAE,GAAGM,CAAC,CAAC,GAAGD,IAAI;MAC5C,CAAC,CAAC;MAEF,OAAOL,GAAG;IACZ,KAAK,QAAQ;MACXA,GAAG,GAAGE,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC;MACzBH,GAAG,CAAC,EAAE,CAAC,GAAGR,YAAY;MACtBF,OAAO,CAACC,IAAI,CAACI,GAAG,CAAC,GAAGK,GAAG;MACvB,OAAOA,GAAG;EACd;AACF;AAEAO,MAAM,CAACC,OAAO,GAAGT,QAAQ"},"metadata":{},"sourceType":"script","externalDependencies":[]}